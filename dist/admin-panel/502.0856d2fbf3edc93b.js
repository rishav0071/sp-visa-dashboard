"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[502],{7502:(E,A,a)=>{a.r(A),a.d(A,{AuthModule:()=>y});var p=a(6895),I=a(6438),v=a(3141),e=a(4650);class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["auth-layout"]],decls:12,vars:0,consts:[[1,"auth-module","w-100","min-vh-100","bg-light-warning","position-relative"],[1,"auth-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","mx-auto"],[1,"logo-title","py-4","mb-5"],[1,"m-auto","mt-5"],[1,"auth-cover","d-flex","justify-content-center","justify-content-md-center","gap-2"],[1,"left-part"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),e._uU(7,"Immi Gov"),e.qZA()()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"router-outlet"),e.qZA()()()()()())},dependencies:[I.lC]});var r=a(4006),S=a(8746),O=a(7496);const _={statusCode:201,success:!0,data:{employeeDetails:{firstName:"Admin",lastName:"Panel",displayName:"panel"},accessToken:"",role:{name:"Admin",modules:[{title:"User",actions:[],siblings:[{title:"User",description:null,actions:[{name:"Add",type:"BUTTON",permission:!0},{name:"View",type:"LISTING_ACTION",permission:!0},{name:"Update",type:"LISTING_ACTION",permission:!0}],siblings:[],permission:!0}],permission:!0},{title:"Affirmations",actions:[],siblings:[{title:"Affirmations",description:null,actions:[{name:"Add",type:"BUTTON",permission:!0},{name:"View",type:"LISTING_ACTION",permission:!0},{name:"Update",type:"LISTING_ACTION",permission:!0}],siblings:[],permission:!0}],permission:!0},{title:"Master Data",actions:[],siblings:[],permission:!1}]}}};var w=a(1001),F=a(1782),M=a(8948),K=a(89),N=a(9549),T=a(4144),P=a(6514);function Z(s,t){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"Email Address is required"),e.qZA())}function B(s,t){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"Password is required"),e.qZA())}class m{constructor(t,n,o,i,l){this.fb=t,this.router=n,this._authService=o,this._localstorageService=i,this.permissionService=l,this.constant=O.S}ngOnInit(){if(this._authService.loggedIn()){const n=this.permissionService.firstPermissionPage();setTimeout(()=>{this.router.navigate([n])})}this.intilizationForm()}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}intilizationForm(){this.login=this.fb.group({email:["",[r.kI.required]],password:["",[r.kI.required]]})}get f(){return this.login.controls}ngsubmit(){if(this.login.invalid)return;let t=this.login.value;this.loginApi(t)}loginApi(t){(0,w.tr)(!0),this.subs=this._authService.login(t).pipe((0,S.x)(()=>(0,w.tr)(!1))).subscribe(n=>{if(console.log("Res",n),n.status){let o=_;o.data.accessToken=n.data.token,console.log("token-------------",o),localStorage.setItem("User Data",JSON.stringify(o.data)),(0,w.vN)(o.data.accessToken,o.data.accessToken),(0,w.TC)(!0);let i=o.data.role.modules;this._localstorageService.setItem("loggedInRole",JSON.stringify(i)),this.permissionService.mapSideBarMenu();const l=this.permissionService.firstPermissionPage();setTimeout(()=>{this.router.navigate([l])})}else this._localstorageService.showMessage(this.constant.error,n.message)})}}m.\u0275fac=function(t){return new(t||m)(e.Y36(r.qu),e.Y36(I.F0),e.Y36(F.e),e.Y36(M.g),e.Y36(K.$))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-welcome"]],decls:17,vars:3,consts:[[1,"auth-form",3,"formGroup","ngSubmit"],[1,"text-center","mb-2"],[1,"text-dark-gray","font-14","text-center","mb-4"],["appearance","outline",1,"w-100"],["matInput","","formControlName","email","required","","appEmailCaseDirective","","autocomplete","username"],[4,"ngIf"],["matInput","","formControlName","password","required","","autocomplete","password","type","password"],["type","submit",1,"btn","btn-primary","d-block","w-100","font-16","fw-600","m-auto","py-3","px-3"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.ngsubmit()}),e.TgZ(1,"h2",1),e._uU(2,"Welcome"),e.qZA(),e.TgZ(3,"p",2),e._uU(4," Please login to admin dashboard "),e.qZA(),e.TgZ(5,"mat-form-field",3)(6,"mat-label"),e._uU(7,"Email/Username"),e.qZA(),e._UZ(8,"input",4),e.YNc(9,Z,2,0,"mat-error",5),e.qZA(),e.TgZ(10,"mat-form-field",3)(11,"mat-label"),e._uU(12,"Password"),e.qZA(),e._UZ(13,"input",6),e.YNc(14,B,2,0,"mat-error",5),e.qZA(),e.TgZ(15,"button",7),e._uU(16," Login "),e.qZA()()),2&t&&(e.Q6J("formGroup",n.login),e.xp6(9),e.Q6J("ngIf",null==n.f.email||null==n.f.email.errors?null:n.f.email.errors.required),e.xp6(5),e.Q6J("ngIf",null==n.f.password||null==n.f.password.errors?null:n.f.password.errors.required))},dependencies:[p.O5,N.TO,N.KE,N.hX,T.Nt,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,P.Z]});const U=[{path:v.h.Empty,component:u,children:[{path:v.h.login,component:m},{path:v.h.Empty,redirectTo:v.h.login,pathMatch:"full"}]}];class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[I.Bz.forChild(U),I.Bz]});const D=[T.c];class f{}function k(s,t){if(1&s){const n=e.EpF();e.TgZ(0,"input",3,4),e.NdJ("paste",function(i){e.CHM(n);const l=e.oxw(2);return e.KtG(l.handlePaste(i))})("keyup",function(i){const C=e.CHM(n).index,b=e.oxw(2);return e.KtG(b.onKeyUp(i,C))})("input",function(i){e.CHM(n);const l=e.oxw(2);return e.KtG(l.onInput(i))})("keydown",function(i){const C=e.CHM(n).index,b=e.oxw(2);return e.KtG(b.onKeyDown(i,C))}),e.qZA()}if(2&s){const n=t.$implicit,o=t.index,i=e.oxw(2);e.Gre("otp-input ",i.config.inputClass,""),e.Q6J("pattern",i.config.allowNumbersOnly?"\\d*":"")("type",i.inputType)("placeholder",(null==i.config?null:i.config.placeholder)||"")("ngStyle",i.config.inputStyles)("formControl",i.otpForm.controls[n])("id",i.getBoxId(o))}}function V(s,t){if(1&s&&(e.TgZ(0,"div",1),e.YNc(1,k,2,9,"input",2),e.ALo(2,"keys"),e.qZA()),2&s){const n=e.oxw();e.Gre("ng-otp-input-wrapper wrapper ",n.config.containerClass,""),e.MGl("id","c_",n.componentKey,""),e.Q6J("ngStyle",n.config.containerStyles),e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,6,null==n.otpForm?null:n.otpForm.controls))}}f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[p.ez,D,T.c]});class g{static ifTab(t){return this.ifKey(t,"Tab")}static ifDelete(t){return this.ifKey(t,"Delete;Del")}static ifBackspace(t){return this.ifKey(t,"Backspace")}static ifRightArrow(t){return this.ifKey(t,"ArrowRight;Right")}static ifLeftArrow(t){return this.ifKey(t,"ArrowLeft;Left")}static ifSpacebar(t){return this.ifKey(t,"Spacebar; ")}static ifKey(t,n){return n.split(";").some(i=>i===t.key)}}class c{transform(t){return Object.keys(t)}}c.\u0275fac=function(t){return new(t||c)},c.\u0275pipe=e.Yjl({name:"keys",type:c,pure:!0});class x{constructor(t,n){this.keysPipe=t,this.document=n,this.config={length:4},this.onInputChange=new e.vpe,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}ngOnInit(){this.otpForm=new r.cw({});for(let t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new r.NI);this.otpForm.valueChanges.subscribe(t=>{this.keysPipe.transform(this.otpForm.controls).forEach(n=>{var o=this.otpForm.controls[n].value;o&&o.length>1&&(o.length>=this.config.length?this.setValue(o):this.rebuildValue())})})}ngAfterViewInit(){if(!this.config.disableAutoFocus){const t=this.document.getElementById(`c_${this.componentKey}`);if(t){const n=t.getElementsByClassName("otp-input")[0];n&&n.focus&&n.focus()}}}getControlName(t){return`ctrl_${t}`}onKeyDown(t,n){const o=this.getBoxId(n-1),i=this.getBoxId(n);return g.ifSpacebar(t)?(t.preventDefault(),!1):g.ifBackspace(t)?(t.target.value?this.clearInput(i,n):(this.clearInput(o,n-1),this.setSelected(o)),void this.rebuildValue()):void 0}onInput(t){let n=this.currentVal?`${this.currentVal}${t.target.value}`:t.target.value;if(this.config.allowNumbersOnly&&!this.validateNumber(n))return t.target.value="",t.stopPropagation(),void t.preventDefault()}onKeyUp(t,n){g.ifTab(t)&&(n-=1);const o=this.getBoxId(n+1),i=this.getBoxId(n-1),l=this.getBoxId(n);return g.ifRightArrow(t)?(t.preventDefault(),void this.setSelected(o)):g.ifLeftArrow(t)?(t.preventDefault(),void this.setSelected(i)):g.ifDelete(t)?(t.target.value?this.clearInput(l,n):(this.clearInput(i,n-1),this.setSelected(i)),void this.rebuildValue()):void(!t.target.value||(this.ifValidKeyCode(t)&&this.setSelected(o),this.rebuildValue()))}validateNumber(t){return t&&/^[0-9]+$/.test(t)}getBoxId(t){return`otp_${t}_${this.componentKey}`}clearInput(t,n){let o=this.getControlName(n);this.otpForm.controls[o]?.setValue(null);const i=this.document.getElementById(t);i&&i instanceof HTMLInputElement&&(i.value=null)}setSelected(t){this.focusTo(t);const n=this.document.getElementById(t);n&&n.setSelectionRange&&setTimeout(()=>{n.setSelectionRange(0,1)},0)}ifValidKeyCode(t){const n=t.key;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(n)}focusTo(t){const n=this.document.getElementById(t);n&&n.focus()}setValue(t){if(!this.config.allowNumbersOnly||!isNaN(t)){if(this.otpForm.reset(),!t)return void this.rebuildValue();if(t=t.toString().replace(/\s/g,""),Array.from(t).forEach((o,i)=>{this.otpForm.get(this.getControlName(i))&&this.otpForm.get(this.getControlName(i)).setValue(o)}),!this.config.disableAutoFocus){const o=this.document.getElementById(`c_${this.componentKey}`);var n=t.length<this.config.length?t.length:this.config.length-1;let i=o.getElementsByClassName("otp-input")[n];i&&i.focus&&i.focus()}this.rebuildValue()}}rebuildValue(){let t="";this.keysPipe.transform(this.otpForm.controls).forEach(n=>{if(this.otpForm.controls[n].value){let o=this.otpForm.controls[n].value,i=o.length>1,l=!this.config.allowNumbersOnly&&this.config.letterCase&&("upper"==this.config.letterCase.toLocaleLowerCase()||"lower"==this.config.letterCase.toLocaleLowerCase());o=o[0];let C=l?"upper"==this.config.letterCase.toLocaleLowerCase()?o.toUpperCase():o.toLowerCase():o;l&&C==o?l=!1:o=C,t+=o,(i||l)&&this.otpForm.controls[n].setValue(o)}}),this.formCtrl?.setValue&&this.formCtrl.setValue(t),this.onInputChange.emit(t),this.currentVal=t}handlePaste(t){let n=t.clipboardData||window.clipboardData;if(n)var o=n.getData("Text");t.stopPropagation(),t.preventDefault(),o&&(!this.config.allowNumbersOnly||this.validateNumber(o))&&this.setValue(o)}}x.\u0275fac=function(t){return new(t||x)(e.Y36(c),e.Y36(p.K0))},x.\u0275cmp=e.Xpm({type:x,selectors:[["ng-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","class","formControl","id","paste","keyup","input","keydown",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","formControl","id","paste","keyup","input","keydown"],["inp",""]],template:function(t,n){1&t&&e.YNc(0,V,3,8,"div",0),2&t&&e.Q6J("ngIf",null==n.otpForm?null:n.otpForm.controls)},dependencies:[p.O5,p.PC,p.sg,r.Fj,r.c5,r.JJ,r.oH,c],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]});class h{}h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({providers:[c],imports:[[p.ez,r.u5,r.UX]]});var L=a(1683);class y{}y.\u0275fac=function(t){return new(t||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({imports:[p.ez,d,f,h,r.u5,r.UX,L.o]})}}]);